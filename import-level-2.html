

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IMPORT NIVEAU 2 &mdash; GeoNature 2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="DEVELOPPEMENT" href="development.html" />
    <link rel="prev" title="IMPORT NIVEAU 1" href="import-level-1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> GeoNature
          

          
            
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation-all.html">INSTALLATION GLOBALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-standalone.html">INSTALLATION AUTONOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-mtes.html">SPECIFICITES DEPOBIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-1.html">IMPORT NIVEAU 1</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">IMPORT NIVEAU 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#import-du-fichier-csv">1 - Import du fichier CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparation-de-la-nouvelle-table-contenant-les-donnees-importees">2 - Préparation de la nouvelle table contenant les données importées</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-des-metadonnees">3 - Création des métadonnées</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-du-mapping-source-cible">4 - Création du mapping (source –&gt; cible)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#construire-la-requete-d-import">5 - Construire la requête d’import</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chargement-des-donnees-dans-la-table-de-destination-synthese-ici">6 - Chargement des données dans la table de destination (synthese ici)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#on-gere-les-nouveaux-taxons-vis-a-vis-la-saisie">7 - On gère les nouveaux taxons vis à vis la saisie</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deplacement-de-la-table-importee-facultatif">8 - Déplacement de la table importée (facultatif)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resultat-final">RESULTAT FINAL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions-compatibility.html">COMPATIBILITE</a></li>
<li class="toctree-l1"><a class="reference internal" href="conf-apache.html">CONFIGURATION APACHE</a></li>
<li class="toctree-l1"><a class="reference internal" href="https.html">HTTPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">CHANGELOG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>IMPORT NIVEAU 2</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/import-level-2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="import-niveau-2">
<h1>IMPORT NIVEAU 2<a class="headerlink" href="#import-niveau-2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>L’exercice consiste à importer le fichier
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/import-avance/observations.csv">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/import-avance/observations.csv</a> dans GeoNature V2.</p>
<p>1 - On charge le fichier CSV dans une table de la base de données.</p>
<p>2 - On prépare la table importée (FK et typage des champs si besoin).</p>
<p>3 - On créé les métadonnées pour que GeoNature sache identifier les nouvelles données.</p>
<p>4 - On mappe les champs de la table d’import avec ceux de la synthèse.</p>
<blockquote>
<div>Pour cela on utilise une fonction dédiée qui nous prépare le travail. Il ne reste plus qu’à finaliser le mapping (la fonction ne peut pas tout deviner).</div></blockquote>
<p>5 - On crée la requête d’import.</p>
<blockquote>
<div>Pour cela on utilise une fonction dédiée qui nous prépare le travail. On adapte la requête produite par la fonction.</div></blockquote>
<p>6 - On importe les données en synthèse.</p>
<p>7 - On gère les nouveaux taxons vis à vis la saisie.</p>
<p>8 - On archive la table où on veut.</p>
</div>
<div class="section" id="import-du-fichier-csv">
<h2>1 - Import du fichier CSV<a class="headerlink" href="#import-du-fichier-csv" title="Permalink to this headline">¶</a></h2>
<p>Cette action doit être faite par un superuser PostgreSQL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body"><ul class="first last simple">
<li>Le fichier CSV doit être présent localement sur le serveur hébergeant la base de données.</li>
<li>Il fichier doit être encodé en UTF-8 et la première ligne doit comporter le nom des champs.</li>
<li>Le séparateur de champs doit être le point-virgule.</li>
<li>La fonction utilise la fonction <code class="docutils literal"><span class="pre">COPY</span></code> capable de lire le système de fichier du serveur. Pour des raisons de sécurité, cette fonction <code class="docutils literal"><span class="pre">COPY</span></code> n’est accessible qu’aux superutilisateurs. Vous devez donc disposer d’un accès superutilisateur PostgreSQL pour utiliser cette fonction d’import. Si l’utilisateur connecté à la base dans pgAdmin n’est pas superuser, on peut le faire dans psql.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>DANS UN TERMINAL :</p>
<div class="code sh highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">su</span> <span class="n">postgres</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">d</span> <span class="n">geonature2db</span>
</pre></div>
</div>
<p>Dans les 2 cas, copier-coller les 2 commandes ci-dessous en adaptant les chemins et l’utilisateur.</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">load_csv_file</span><span class="p">(</span><span class="s1">&#39;/home/myuser/imports/observations.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">);</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">OWNER</span> <span class="n">TO</span> <span class="n">geonatuser</span><span class="p">;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body"><ul class="first last simple">
<li>Attention : si la table existe, elle est supprimée et recréée à partir du CSV fourni.</li>
<li>La fonction créé la table et sa structure dans le schéma et la table fournie en paramètre.</li>
<li>Le contenu du fichier CSV est chargé dans la table (initialement toutes les colonnes sont de type <code class="docutils literal"><span class="pre">text</span></code>).</li>
<li>La function tente ensuite d’identifier et de modifier le type de chacune des colonnes à partir du contenu et seuls les types <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">real</span></code>, et <code class="docutils literal"><span class="pre">date</span></code> sont actuellement reconnus.</li>
<li>Si vous devez modifier manuellement le type d’une colonne, vous pouvez vous inspirer du code ci-dessous.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="preparation-de-la-nouvelle-table-contenant-les-donnees-importees">
<h2>2 - Préparation de la nouvelle table contenant les données importées<a class="headerlink" href="#preparation-de-la-nouvelle-table-contenant-les-donnees-importees" title="Permalink to this headline">¶</a></h2>
<p><strong>Ajouter une clé primaire sur la table importée</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">ADD</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">id_data</span><span class="p">);</span>
</pre></div>
</div>
<p>Si la table ne comporte pas de champ permettant une identification unique des observations :</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span>
  <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">gid</span> <span class="n">serial</span><span class="p">;</span>

<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span>
  <span class="n">ADD</span> <span class="n">CONSTRAINT</span> <span class="n">pk_testimport</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">(</span><span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Si besoin de mettre à jour le type de certains champs de la table importée</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">monschema</span><span class="o">.</span><span class="n">matable</span> <span class="n">ALTER</span> <span class="n">COLUMN</span> <span class="n">macolonne</span> <span class="n">TYPE</span> <span class="n">montype</span> <span class="n">USING</span> <span class="n">macolonne</span><span class="p">::</span><span class="n">montype</span><span class="p">;</span>
</pre></div>
</div>
<p>En l’état vos données sont importées et stockées dans la base GeoNature. Cependant GeoNature ne connait pas ces données. Pour qu’elles soient utilisables, au moins en consultation, vous devez fournir à l’application GeoNature un certain nombre d’informations concernant ces données et à minima les importer dans la synthèse. Vous pouvez également les importer dans un autre module, comme “Occtax” (non abordé dans cet exemple).</p>
</div>
<div class="section" id="creation-des-metadonnees">
<h2>3 - Création des métadonnées<a class="headerlink" href="#creation-des-metadonnees" title="Permalink to this headline">¶</a></h2>
<p>Il est nécessaire de rattacher les données importées à un jeu de données qui doit appartenir à un cadre d’acquisition. Si ceux-ci n’ont pas encore été créés dans la base, vous devez le faire dans <code class="docutils literal"><span class="pre">gn_meta.t_acquisition_frameworks</span></code> pour le cadre d’acquisition et dans <code class="docutils literal"><span class="pre">gn_meta.t_datasets</span></code> pour le jeu de données. Vous pouvez pour cela utiliser les formulaires disponibles dans l’interface d’aministration de GeoNature : <a class="reference external" href="http://myurl/geonature/#/admin">http://myurl/geonature/#/admin</a></p>
<p>Le jeu de données doit être rattaché à un protocole décrivant la manière dont les données ont été collectées.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body">Noter les ID retournés lors des insertions.</td>
</tr>
</tbody>
</table>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_meta</span><span class="o">.</span><span class="n">sinp_datatype_protocols</span> <span class="p">(</span> <span class="n">protocol_name</span><span class="p">,</span> <span class="n">protocol_desc</span><span class="p">,</span> <span class="n">id_nomenclature_protocol_type</span><span class="p">,</span> <span class="n">protocol_url</span><span class="p">)</span>
<span class="n">VALUES</span> <span class="p">(</span><span class="s1">&#39;ATBI&#39;</span><span class="p">,</span> <span class="s1">&#39;Inventaire ATBI Dans la réserve de Lauvitel - Date_debut : 2013-01-01 - Date_fin : 3000-01-01&#39;</span><span class="p">,</span> <span class="mi">395</span><span class="p">,</span> <span class="n">NULL</span><span class="p">)</span> <span class="n">returning</span> <span class="n">id_protocol</span><span class="p">;</span>
</pre></div>
</div>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_meta</span><span class="o">.</span><span class="n">t_datasets</span><span class="p">(</span><span class="n">id_acquisition_framework</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">,</span> <span class="n">dataset_shortname</span><span class="p">,</span> <span class="n">dataset_desc</span><span class="p">,</span> <span class="n">id_nomenclature_data_type</span><span class="p">,</span> <span class="n">keywords</span><span class="p">,</span> <span class="n">marine_domain</span><span class="p">,</span> <span class="n">terrestrial_domain</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span>
<span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Observations Flavia 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;Observations Flavia 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;Données ATBI Flavia pour l&#39;&#39;année 2017&#39;</span><span class="p">,</span> <span class="mi">326</span><span class="p">,</span> <span class="s1">&#39;Invertébrés, PNE, ATBI&#39;</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">)</span> <span class="n">returning</span> <span class="n">id_dataset</span><span class="p">;</span>
</pre></div>
</div>
<p>Il est également nécessaire, pour la synthese, de lui indiquer où sont stockées les données qu’elle contient et comment y accèder. Vous devez pour cela disposer d’une source de données dans <code class="docutils literal"><span class="pre">gn_synthese.t_sources</span></code> correspondant aux données à importer. Pour l’exemple nous allons créer une source de données avec la commande SQL suivante :</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">t_sources</span><span class="p">(</span><span class="n">name_source</span><span class="p">,</span> <span class="n">desc_source</span><span class="p">)</span>
<span class="n">VALUES</span><span class="p">(</span><span class="s1">&#39;ATBI&#39;</span><span class="p">,</span> <span class="s1">&#39;Données d&#39;&#39;inventaire ATBI&#39;</span><span class="p">)</span> <span class="n">returning</span> <span class="n">id_source</span><span class="p">;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body"><ul class="first simple">
<li>D’autres valeurs sont attendues mais pour l’exercice, le fichier source utilise des valeurs insérée à titre d’exemple lors de la création de la base GeoNature.</li>
<li><code class="docutils literal"><span class="pre">id_role</span></code> 3 et 4 dans <code class="docutils literal"><span class="pre">utilisateurs.t_roles</span></code></li>
<li><code class="docutils literal"><span class="pre">id_organisme</span></code> 1 dans <code class="docutils literal"><span class="pre">utilisateurs.bib_organismes</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">notes:</th><td class="field-body"><p class="first last">Il est possible d’utiliser ce mécanisme générique pour insérer des données de n’importe quelle table vers n’importe quelle autre, à partir du moment où il est possible d’établir un mapping cohérent entre les champs et notamment que les types puissent correspondre ou soient “transtypables”.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creation-du-mapping-source-cible">
<h2>4 - Création du mapping (source –&gt; cible)<a class="headerlink" href="#creation-du-mapping-source-cible" title="Permalink to this headline">¶</a></h2>
<p>Le schéma gn_imports comporte trois tables permettant de préparer le mapping des champs entre la table importée (source) et une table de destination (target).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">gn_imports.matching_tables</span></code> permet de déclarer la table source et la table de destination. Noter le <code class="docutils literal"><span class="pre">id_matching_table</span></code> généré par la séquence lors de l’insertion d’un nouveau “matching” dans cette table.</li>
<li><code class="docutils literal"><span class="pre">gn_imports.matching_fields</span></code> permet de faire le matching entre les champs de la table source et de la table de destination. Vous devez indiquer le type de chacun des champs de la table de destination ainsi que le <code class="docutils literal"><span class="pre">id_matching_table</span></code>.</li>
<li><code class="docutils literal"><span class="pre">gn_imports.matching_geoms</span></code> permet de préparer la création du geom dans la table de destination à partir du ou des champs constituant le geom fourni dans la table source : champs contenant les x et y pour un format <code class="docutils literal"><span class="pre">xy</span></code> ou le champ comportant le wkt pour le format <code class="docutils literal"><span class="pre">wkt</span></code>.</li>
</ul>
<p>En attendant la création d’une interface permettant de faciliter l’import, vous devez remplir ces tables manuellement. Cependant, la fonction <code class="docutils literal"><span class="pre">gn_imports.fct_generate_mapping('table_source',</span> <span class="pre">'table_cible',</span> <span class="pre">forcedelete)</span></code> permet de pré-générer un mapping.</p>
<p>Si le mapping source/cible existe, la fonction ne fait rien et un message d’erreur est levé. Si le mapping n’existe pas ou si le paramètre <code class="docutils literal"><span class="pre">forcedelete</span> <span class="pre">(boolean</span> <span class="pre">default</span> <span class="pre">=</span> <span class="pre">false)</span></code> est à <code class="docutils literal"><span class="pre">true</span></code>, la fonction crée le mapping en remplissant la table <code class="docutils literal"><span class="pre">gn_imports.matching_tables</span></code> et la table``gn_imports.matching_fields`` avec une ligne par champ de la table cible. Il ne vous reste plus qu’à manuellement supprimer ou remplacer les valeurs ‘replace me’ dans le champs source_field ou les valeurs par défaut proposées par la fonction.</p>
<p><strong>Pré-générer les champs à mapper</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>OU si besoin d’écraser un mapping des champs existants</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">,</span><span class="n">true</span><span class="p">);</span>
</pre></div>
</div>
<p>IL FAUT ICI METTRE A JOUR LA TABLE <code class="docutils literal"><span class="pre">gn_imports_matching_fields</span></code> pour établir manuellement la correspondance des champs entre la table source et la table cible (voir le mapping final pour le fichier CSV fourni en exemple à la fin de cette page).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body"><ul class="first last simple">
<li>Au moins un des 2 champs <code class="docutils literal"><span class="pre">source_field</span></code> ou <code class="docutils literal"><span class="pre">source_default_value</span></code> doit être renseigné.</li>
<li>Si le champ <code class="docutils literal"><span class="pre">source_field</span></code> est renseigné, le champ <code class="docutils literal"><span class="pre">source_default_value</span></code> est ignoré.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Une fois que le mapping est renseigné, vous pouvez passer à l’étape suivante.</p>
</div>
<div class="section" id="construire-la-requete-d-import">
<h2>5 - Construire la requête d’import<a class="headerlink" href="#construire-la-requete-d-import" title="Permalink to this headline">¶</a></h2>
<p>Attention, pgAdmin va tronquer le résultat. Pour obtenir l’ensemble de la requête utiliser le bouton d’export du résultat dans un fichier ou executé la requête avec psql.</p>
<p><strong>Génération de la requête d’import dans les tables de destination</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body">UTILISER LE BOUTON D’EXPORT DU RESULTAT DE LA REQUETE DE PGADMIN ou utiliser psql.
IL EST NECESSAIRE D’ADAPTER LA REQUETE SI BESOIN DE FAIRE DES JOIN POUR RECUPERER DES VALEURS DANS D’AUTRES TABLES</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="chargement-des-donnees-dans-la-table-de-destination-synthese-ici">
<h2>6 - Chargement des données dans la table de destination (synthese ici)<a class="headerlink" href="#chargement-des-donnees-dans-la-table-de-destination-synthese-ici" title="Permalink to this headline">¶</a></h2>
<p>Voir la requête d’import en synthèse à la fin de cette page.</p>
</div>
<div class="section" id="on-gere-les-nouveaux-taxons-vis-a-vis-la-saisie">
<h2>7 - On gère les nouveaux taxons vis à vis la saisie<a class="headerlink" href="#on-gere-les-nouveaux-taxons-vis-a-vis-la-saisie" title="Permalink to this headline">¶</a></h2>
<p>Gestion des taxons dans <code class="docutils literal"><span class="pre">taxonomie.bib_noms</span></code> et de la liste des taxons saisissables dans Occtax.</p>
<p>Cette étape est optionnelle et va permettre de rajouter les nouveaux taxons intégrés dans la synthèse dans la table des taxons de votre territoire (<code class="docutils literal"><span class="pre">taxonomie.bib_noms</span></code>) et dans la liste des taxons saisissables dans Occtax (<code class="docutils literal"><span class="pre">cor_nom_liste</span></code>).</p>
<p><strong>Création d’une table temporaire</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span>
<span class="p">(</span>
  <span class="n">cd_nom</span> <span class="n">integer</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">cd_ref</span> <span class="n">integer</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">nom_fr</span> <span class="n">character</span> <span class="n">varying</span><span class="p">,</span>
  <span class="n">array_listes</span> <span class="n">integer</span><span class="p">[],</span>
  <span class="n">CONSTRAINT</span> <span class="n">new_noms_pkey</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">cd_nom</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p><strong>Insertion des nouveaux taxons dans cette table et calcul des listes</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">TRUNCATE</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span>
<span class="n">SELECT</span> <span class="n">DISTINCT</span>
  <span class="n">i</span><span class="o">.</span><span class="n">cd_nom</span><span class="p">,</span>
  <span class="n">t</span><span class="o">.</span><span class="n">cd_ref</span><span class="p">,</span>
  <span class="n">split_part</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">nom_vern</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="n">array_agg</span><span class="p">(</span><span class="n">DISTINCT</span> <span class="n">l</span><span class="o">.</span><span class="n">id_liste</span><span class="p">)</span> <span class="n">AS</span> <span class="n">array_listes</span>
<span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">i</span>
<span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">taxref</span> <span class="n">t</span> <span class="n">ON</span> <span class="n">t</span><span class="o">.</span><span class="n">cd_nom</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">cd_nom</span>
<span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">bib_listes</span> <span class="n">l</span> <span class="n">ON</span> <span class="n">id_liste</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">WHERE</span> <span class="n">i</span><span class="o">.</span><span class="n">cd_nom</span> <span class="n">NOT</span> <span class="n">IN</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">cd_nom</span> <span class="n">FROM</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">bib_noms</span><span class="p">)</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">i</span><span class="o">.</span><span class="n">cd_nom</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">cd_ref</span><span class="p">,</span> <span class="n">nom_vern</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Insertion dans ``bib_noms``</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">setval</span><span class="p">(</span><span class="s1">&#39;taxonomie.bib_noms_id_nom_seq&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">SELECT</span> <span class="nb">max</span><span class="p">(</span><span class="n">id_nom</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">bib_noms</span><span class="p">),</span> <span class="n">true</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">bib_noms</span><span class="p">(</span><span class="n">cd_nom</span><span class="p">,</span> <span class="n">cd_ref</span><span class="p">,</span> <span class="n">nom_francais</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cd_nom</span><span class="p">,</span> <span class="n">cd_ref</span><span class="p">,</span> <span class="n">nom_fr</span> <span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Insertion dans ``cor_nom_liste``</strong></p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">cor_nom_liste</span> <span class="p">(</span><span class="n">id_liste</span><span class="p">,</span> <span class="n">id_nom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">unnest</span><span class="p">(</span><span class="n">array_listes</span><span class="p">)</span> <span class="n">AS</span> <span class="n">id_liste</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">id_nom</span>
<span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span> <span class="n">tnn</span>
<span class="n">JOIN</span> <span class="n">taxonomie</span><span class="o">.</span><span class="n">bib_noms</span> <span class="n">n</span> <span class="n">ON</span> <span class="n">n</span><span class="o">.</span><span class="n">cd_nom</span> <span class="o">=</span> <span class="n">tnn</span><span class="o">.</span><span class="n">cd_nom</span><span class="p">;</span>
</pre></div>
</div>
<p>Si on veut nettoyer et qu’on est sur de ne plus en avoir besoin</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">DROP</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">new_noms</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="deplacement-de-la-table-importee-facultatif">
<h2>8 - Déplacement de la table importée (facultatif)<a class="headerlink" href="#deplacement-de-la-table-importee-facultatif" title="Permalink to this headline">¶</a></h2>
<p>On peut si on le souhaite déplacer la table vers une destination d’archivage</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">SET</span> <span class="n">SCHEMA</span> <span class="n">schema_destination</span><span class="p">;</span>
</pre></div>
</div>
<p>On peut la mettre dans le schéma gn_exports pour l’exercice afin de tester mais ce n’est pas sa vocation.</p>
</div>
<div class="section" id="resultat-final">
<h2>RESULTAT FINAL<a class="headerlink" href="#resultat-final" title="Permalink to this headline">¶</a></h2>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="n">WHERE</span> <span class="n">id_matching_table</span> <span class="n">IN</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">207</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;uuid_generate_v4()&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_id_sinp&#39;</span><span class="p">,</span> <span class="s1">&#39;uuid&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">208</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;uuid_generate_v4()&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_id_sinp_grp&#39;</span><span class="p">,</span> <span class="s1">&#39;uuid&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">219</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;PREUVE_EXIST&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_exist_proof&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="s1">&#39;id_data&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;entity_source_pk_value&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="s1">&#39;id_lot&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;id_dataset&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">209</span><span class="p">,</span> <span class="s1">&#39;id_source&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;id_source&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">213</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_GRP&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_grp_typ&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NAT_OBJ_GEO&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_geo_object_nature&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">214</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;METH_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_obs_meth&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">215</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TECHNIQUE_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_obs_technique&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">217</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;ETA_BIO&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_bio_condition&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_BIO&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_bio_status&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NATURALITE&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_naturalness&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_VALID&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_valid_status&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NIV_PRECIS&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_diffusion_level&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;SEXE&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_sex&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STADE_VIE&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_life_stage&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;OBJ_DENBR&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_obj_count&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">226</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;SENSIBILITE&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_sensitivity&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">225</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_DENBR&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_type_count&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">227</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_observation_status&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">228</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;DEE_FLOU&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_blurring&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">230</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_INF_GEO&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_info_geo_type&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">229</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_SOURCE&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_source_status&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="s1">&#39;cd_nom&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;cd_nom&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">237</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;digital_proof&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">238</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;non_digital_proof&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">239</span><span class="p">,</span> <span class="s1">&#39;altitude_retenue&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;altitude_min&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="s1">&#39;altitude_retenue&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;altitude_max&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">244</span><span class="p">,</span> <span class="s1">&#39;dateobs&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;date_min&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="s1">&#39;dateobs&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;date_max&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">246</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;validator&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">248</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;observers&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">247</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_comment&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;METH_DETERMIN&#39;&#39;::character varying)&#39;</span><span class="p">,</span> <span class="s1">&#39;id_nomenclature_determination_method&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">252</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;now()&#39;</span><span class="p">,</span> <span class="s1">&#39;meta_validation_date&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">253</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;now()&#39;</span><span class="p">,</span> <span class="s1">&#39;meta_create_date&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">254</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;now()&#39;</span><span class="p">,</span> <span class="s1">&#39;meta_update_date&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;&#39;&#39;c&#39;&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;last_action&#39;</span><span class="p">,</span> <span class="s1">&#39;character&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;gn_commons.get_default_parameter(&#39;&#39;taxref_version&#39;&#39;,NULL)::character varying&#39;</span><span class="p">,</span> <span class="s1">&#39;meta_v_taxref&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">251</span><span class="p">,</span> <span class="s1">&#39;remarques&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">231</span><span class="p">,</span> <span class="s1">&#39;effectif_total&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;count_min&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="s1">&#39;effectif_total&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;count_max&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">258</span><span class="p">,</span> <span class="s1">&#39;taxon_saisi&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;nom_cite&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">249</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;u.nom_role || &#39;&#39; &#39;&#39; || u.prenom_role&#39;</span><span class="p">,</span> <span class="s1">&#39;determiner&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">234</span><span class="p">,</span> <span class="s1">&#39;taxon_saisi&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;nom_cite&#39;</span><span class="p">,</span> <span class="s1">&#39;character varying&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="s1">&#39;id_data&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;entity_source_pk_value&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_fields</span> <span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span> <span class="n">source_field</span><span class="p">,</span> <span class="n">source_default_value</span><span class="p">,</span> <span class="n">target_field</span><span class="p">,</span> <span class="n">target_field_type</span><span class="p">,</span> <span class="n">field_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">257</span><span class="p">,</span> <span class="s1">&#39;observateurs&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;id_role&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_geoms</span> <span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span> <span class="n">source_x_field</span><span class="p">,</span> <span class="n">source_y_field</span><span class="p">,</span> <span class="n">source_geom_field</span><span class="p">,</span> <span class="n">source_geom_format</span><span class="p">,</span> <span class="n">source_srid</span><span class="p">,</span> <span class="n">target_geom_field</span><span class="p">,</span> <span class="n">target_geom_srid</span><span class="p">,</span> <span class="n">geom_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="mi">2154</span><span class="p">,</span> <span class="s1">&#39;the_geom_local&#39;</span><span class="p">,</span> <span class="mi">2154</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_geoms</span> <span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span> <span class="n">source_x_field</span><span class="p">,</span> <span class="n">source_y_field</span><span class="p">,</span> <span class="n">source_geom_field</span><span class="p">,</span> <span class="n">source_geom_format</span><span class="p">,</span> <span class="n">source_srid</span><span class="p">,</span> <span class="n">target_geom_field</span><span class="p">,</span> <span class="n">target_geom_srid</span><span class="p">,</span> <span class="n">geom_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;POINT(6.064544 44.28787)&#39;</span><span class="p">,</span> <span class="s1">&#39;wkt&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">,</span> <span class="s1">&#39;the_geom_4326&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">matching_geoms</span> <span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span> <span class="n">source_x_field</span><span class="p">,</span> <span class="n">source_y_field</span><span class="p">,</span> <span class="n">source_geom_field</span><span class="p">,</span> <span class="n">source_geom_format</span><span class="p">,</span> <span class="n">source_srid</span><span class="p">,</span> <span class="n">target_geom_field</span><span class="p">,</span> <span class="n">target_geom_srid</span><span class="p">,</span> <span class="n">geom_comments</span><span class="p">,</span> <span class="n">id_matching_table</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">,</span> <span class="s1">&#39;the_geom_point&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="n">SELECT</span> <span class="n">pg_catalog</span><span class="o">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_fields_id_matching_field_seq&#39;</span><span class="p">,</span> <span class="mi">258</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">pg_catalog</span><span class="o">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_geoms_id_matching_geom_seq&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">pg_catalog</span><span class="o">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_tables_id_matching_table_seq&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>

<span class="o">---------------</span>
<span class="o">--</span><span class="n">IMPORT</span> <span class="n">DATA</span><span class="o">--</span>
<span class="o">---------------</span>
<span class="o">--</span><span class="n">autogenerated</span> <span class="n">query</span> <span class="n">by</span>
<span class="o">--</span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">synthese</span><span class="p">(</span>
<span class="n">unique_id_sinp</span>
<span class="p">,</span><span class="n">unique_id_sinp_grp</span>
<span class="p">,</span><span class="n">id_nomenclature_exist_proof</span>
<span class="p">,</span><span class="n">entity_source_pk_value</span>
<span class="p">,</span><span class="n">id_dataset</span>
<span class="p">,</span><span class="n">id_source</span>
<span class="p">,</span><span class="n">id_nomenclature_grp_typ</span>
<span class="p">,</span><span class="n">id_nomenclature_geo_object_nature</span>
<span class="p">,</span><span class="n">id_nomenclature_obs_meth</span>
<span class="p">,</span><span class="n">id_nomenclature_obs_technique</span>
<span class="p">,</span><span class="n">id_nomenclature_bio_condition</span>
<span class="p">,</span><span class="n">id_nomenclature_bio_status</span>
<span class="p">,</span><span class="n">id_nomenclature_naturalness</span>
<span class="p">,</span><span class="n">id_nomenclature_valid_status</span>
<span class="p">,</span><span class="n">id_nomenclature_diffusion_level</span>
<span class="p">,</span><span class="n">id_nomenclature_sex</span>
<span class="p">,</span><span class="n">id_nomenclature_life_stage</span>
<span class="p">,</span><span class="n">id_nomenclature_obj_count</span>
<span class="p">,</span><span class="n">id_nomenclature_sensitivity</span>
<span class="p">,</span><span class="n">id_nomenclature_type_count</span>
<span class="p">,</span><span class="n">id_nomenclature_observation_status</span>
<span class="p">,</span><span class="n">id_nomenclature_blurring</span>
<span class="p">,</span><span class="n">id_nomenclature_info_geo_type</span>
<span class="p">,</span><span class="n">id_nomenclature_source_status</span>
<span class="p">,</span><span class="n">cd_nom</span>
<span class="p">,</span><span class="n">digital_proof</span>
<span class="p">,</span><span class="n">non_digital_proof</span>
<span class="p">,</span><span class="n">altitude_min</span>
<span class="p">,</span><span class="n">altitude_max</span>
<span class="p">,</span><span class="n">date_min</span>
<span class="p">,</span><span class="n">date_max</span>
<span class="p">,</span><span class="n">validator</span>
<span class="p">,</span><span class="n">observers</span>
<span class="p">,</span><span class="n">validation_comment</span>
<span class="p">,</span><span class="n">id_nomenclature_determination_method</span>
<span class="p">,</span><span class="n">meta_validation_date</span>
<span class="p">,</span><span class="n">meta_create_date</span>
<span class="p">,</span><span class="n">meta_update_date</span>
<span class="p">,</span><span class="n">last_action</span>
<span class="p">,</span><span class="n">meta_v_taxref</span>
<span class="p">,</span><span class="n">comments</span>
<span class="p">,</span><span class="n">count_min</span>
<span class="p">,</span><span class="n">count_max</span>
<span class="p">,</span><span class="n">nom_cite</span>
<span class="p">)</span>
<span class="n">SELECT</span>
<span class="n">uuid_generate_v4</span><span class="p">()::</span><span class="n">uuid</span> <span class="n">AS</span> <span class="n">unique_id_sinp</span>
<span class="p">,</span><span class="n">uuid_generate_v4</span><span class="p">()::</span><span class="n">uuid</span> <span class="n">AS</span> <span class="n">unique_id_sinp_grp</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;PREUVE_EXIST&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_exist_proof</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">id_data</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span> <span class="n">AS</span> <span class="n">entity_source_pk_value</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">id_lot</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_dataset</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">id_source</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_source</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_GRP&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_grp_typ</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NAT_OBJ_GEO&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_geo_object_nature</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;METH_OBS&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_obs_meth</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TECHNIQUE_OBS&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_obs_technique</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;ETA_BIO&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_bio_condition</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_BIO&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_bio_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NATURALITE&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_naturalness</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_VALID&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_valid_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NIV_PRECIS&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_diffusion_level</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;SEXE&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_sex</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STADE_VIE&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_life_stage</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;OBJ_DENBR&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_obj_count</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;SENSIBILITE&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_sensitivity</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_DENBR&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_type_count</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_OBS&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_observation_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;DEE_FLOU&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_blurring</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_INF_GEO&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_info_geo_type</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_SOURCE&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_source_status</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">cd_nom</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">cd_nom</span>
<span class="p">,</span><span class="n">NULL</span><span class="p">::</span><span class="n">text</span> <span class="n">AS</span> <span class="n">digital_proof</span>
<span class="p">,</span><span class="n">NULL</span><span class="p">::</span><span class="n">text</span> <span class="n">AS</span> <span class="n">non_digital_proof</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">altitude_retenue</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">altitude_min</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">altitude_retenue</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">altitude_max</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">dateobs</span><span class="p">::</span><span class="n">timestamp</span> <span class="n">without</span> <span class="n">time</span> <span class="n">zone</span> <span class="n">AS</span> <span class="n">date_min</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">dateobs</span><span class="p">::</span><span class="n">timestamp</span> <span class="n">without</span> <span class="n">time</span> <span class="n">zone</span> <span class="n">AS</span> <span class="n">date_max</span>
<span class="p">,</span><span class="n">NULL</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span> <span class="n">AS</span> <span class="n">validator</span>
<span class="p">,</span><span class="n">NULL</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span> <span class="n">AS</span> <span class="n">observers</span>
<span class="p">,</span><span class="n">NULL</span><span class="p">::</span><span class="n">text</span> <span class="n">AS</span> <span class="n">validation_comment</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="o">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;METH_DETERMIN&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span><span class="p">)::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_nomenclature_determination_method</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="n">timestamp</span> <span class="n">without</span> <span class="n">time</span> <span class="n">zone</span> <span class="n">AS</span> <span class="n">meta_validation_date</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="n">timestamp</span> <span class="n">without</span> <span class="n">time</span> <span class="n">zone</span> <span class="n">AS</span> <span class="n">meta_create_date</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="n">timestamp</span> <span class="n">without</span> <span class="n">time</span> <span class="n">zone</span> <span class="n">AS</span> <span class="n">meta_update_date</span>
<span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">::</span><span class="n">character</span> <span class="n">AS</span> <span class="n">last_action</span>
<span class="p">,</span><span class="n">gn_commons</span><span class="o">.</span><span class="n">get_default_parameter</span><span class="p">(</span><span class="s1">&#39;taxref_version&#39;</span><span class="p">,</span><span class="n">NULL</span><span class="p">)::</span><span class="n">character</span> <span class="n">varying</span><span class="p">::</span><span class="n">character</span> <span class="n">varying</span> <span class="n">AS</span> <span class="n">meta_v_taxref</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">remarques</span><span class="p">::</span><span class="n">text</span> <span class="n">AS</span> <span class="n">comments</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">effectif_total</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">count_min</span>
<span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">effectif_total</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">count_max</span>
<span class="p">,</span><span class="n">taxon_saisi</span>
<span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">a</span>
<span class="p">;</span>

<span class="o">--</span><span class="n">autogenerated</span> <span class="n">query</span> <span class="n">by</span>
<span class="o">--</span><span class="n">SELECT</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span> <span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">cor_observer_synthese</span><span class="p">(</span>
<span class="n">id_role</span>
<span class="p">,</span><span class="n">id_synthese</span>
<span class="p">)</span>
 <span class="n">SELECT</span>
<span class="n">a</span><span class="o">.</span><span class="n">observateurs</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_role</span>
<span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">id_synthese</span><span class="p">::</span><span class="n">integer</span> <span class="n">AS</span> <span class="n">id_synthese</span>
<span class="n">FROM</span> <span class="n">gn_imports</span><span class="o">.</span><span class="n">testimport</span> <span class="n">a</span>
<span class="o">--</span><span class="bp">self</span> <span class="n">addition</span>
<span class="n">JOIN</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">synthese</span> <span class="n">s</span> <span class="n">ON</span> <span class="n">s</span><span class="o">.</span><span class="n">entity_source_pk_value</span><span class="p">::</span><span class="n">integer</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">id_data</span>
<span class="n">WHERE</span> <span class="n">s</span><span class="o">.</span><span class="n">id_source</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="development.html" class="btn btn-neutral float-right" title="DEVELOPPEMENT" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="import-level-1.html" class="btn btn-neutral float-left" title="IMPORT NIVEAU 1" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, PnE, PnC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>